<!DOCTYPE html>
<html lang="fr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <meta name="robots" content="noindex, nofollow">
    <link rel="icon" type="image/svg+xml" href="/assets/lyftiv-logo.svg" />
    <link rel="manifest" href="/manifest.json">
    <title>Lyftiv - Suivi Séance Musculation</title>
    
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link rel="stylesheet" href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700;800&display=swap">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0-beta3/css/all.min.css">
    
    <script type="module" src="/js/main.js"></script>
</head>
<body>
    <div id="dashboard" class="dashboard-container">
        <div class="dashboard-content">
            <header class="dashboard-header">
                <img src="/assets/lyftiv-logo.svg" alt="Lyftiv Logo" class="lyftiv-logo" />
                <span class="app-name">Lyftiv</span>
            </header>
    
            <section class="session-selector" aria-labelledby="session-selector-title">
                <h2 id="session-selector-title" class="sr-only">Choisissez votre séance</h2>
                <div class="session-selector-grid" id="sessionSelectorGrid">
                </div>
            </section>
    
            <section class="app-guide" aria-labelledby="app-guide-title">
                <h2 id="app-guide-title">Maîtrisez Lyftiv</h2>
                <div class="app-guide-accordion">
                    <details>
                        <summary><strong>Les Calculateurs : Votre Assistant Personnel</strong></summary>
                        <div>
                            <p><strong>Calculateur de Plaques :</strong> Fini les maths ! Dites-lui le poids que vous visez, il vous dit quelles plaques mettre sur la barre.</p>
                            <p><strong>Calculateur d'Objectifs :</strong> Entrez votre record (1RM), et il vous donne les poids parfaits pour vos objectifs : prendre du muscle (hypertrophie) ou gagner en force.</p>
                        </div>
                    </details>
                    <details>
                        <summary><strong>Le Jargon du Fitness, simplifié</strong></summary>
                        <div>
                             <p><strong>Kg/Rép :</strong> La charge moyenne que vous soulevez à chaque répétition. Un chiffre qui doit augmenter avec le temps !</p>
                             <p><strong>1RM (Répétition Maximale) :</strong> Une estimation de la charge maximale que vous pouvez soulever une seule fois. C'est la base pour calculer vos objectifs.</p>
                        </div>
                    </details>
                    <details>
                        <summary><strong>Les Fonctions "Pro" à connaître</strong></summary>
                        <div>
                            <p><i class="fas fa-link"></i> <strong>Le Superset :</strong> Liez deux exercices pour les enchaîner sans repos.</p>
                            <p><i class="fas fa-play"></i> <strong>Le Minuteur :</strong> Lancez-le à la fin d'un exercice pour un temps de repos parfait.</p>
                            <p><i class="fas fa-history"></i> <strong>L'Historique :</strong> Retrouvez toutes vos séances passées pour suivre vos progrès.</p>
                        </div>
                    </details>
                </div>
            </section>
        </div>
    </div>
    
    <div id="app-container" class="hidden">
        <main class="main-container">
            <div class="theme-switcher">
                <button id="homeBtn" class="btn" aria-label="Retourner à l'accueil" title="Accueil">
                    <i class="fas fa-home"></i>
                </button>
                <button id="themeToggleBtn" class="btn" aria-label="Changer de thème"></button>
            </div>
            <h1>
                <img src="/assets/lyftiv-logo.svg" alt="" class="lyftiv-logo" />
                <span>Lyftiv</span>
            </h1>
            
            <section class="controls" aria-label="Contrôles de la séance">
              <label for="sessionSelect"><strong>Séance:</strong></label>
              <select id="sessionSelect" aria-label="Sélectionner une séance d'entraînement">
                </select>
              <button class="btn btn-outline" id="createNewSessionTypeBtn" aria-label="Créer une nouvelle séance">Nouvelle séance</button>
              <button class="btn btn-danger" id="deleteCurrentSessionBtn" aria-label="Supprimer la séance actuelle" title="Supprimer la séance actuelle (personnalisée)">Supprimer la séance</button>
            </section>
            
            <div class="progress-bar" role="progressbar" aria-valuenow="0" aria-valuemin="0" aria-valuemax="100" id="progressBar" aria-label="Progression de la séance">
              <div class="progress-fill" id="progressFill"></div>
            </div>
            
            <section id="exerciseListContainer" class="exercise-list-container" aria-live="polite">
                </section>
            
            <section class="controls add-exercise-section" id="addExerciseSection" aria-labelledby="addExerciseTitle">
                <h2 id="addExerciseTitle" class="sr-only">Ajouter un exercice</h2>
                <div class="input-group">
                    <input type="text" id="customExercise" placeholder="Ajouter un exercice" aria-label="Nom de l'exercice personnalisé">
                    <button class="btn btn-success" id="addExerciseBtn" aria-label="Ajouter l'exercice"> Ajouter</button>
                </div>
            </section>
    
            <section class="summary-section" aria-labelledby="summarySectionTitle">
                <h2 id="summarySectionTitle" class="sr-only">Résumé de la séance</h2>
                <div class="summary-card">
                    <span class="card-icon fas fa-bullseye" aria-hidden="true"></span>
                    <h3>Total kg/rép</h3> <div class="value" id="totalKgRep" aria-live="polite">0 kg/rep</div> </div>
                <div class="summary-card">
                    <span class="card-icon fas fa-calendar-alt" aria-hidden="true"></span>
                    <h3>Semaine précédente</h3>
                    <input type="text" inputmode="decimal" id="previousWeek" placeholder="kg/rep" aria-label="Performance de la semaine précédente">
                </div>
                <div class="summary-card">
                    <span class="card-icon fas fa-chart-line" aria-hidden="true"></span>
                    <h3>Progression</h3>
                    <div class="value" id="delta" aria-live="polite">0 kg</div>
                </div>
                <div class="summary-card">
                    <span class="card-icon fas fa-clock" aria-hidden="true"></span>
                    <h3>Temps total</h3>
                    <div class="value" id="totalTime" aria-live="polite">00:00:00</div>
                    <div class="timer-controls">
                        <button id="toggleWorkoutTimerBtn" class="btn btn-secondary" aria-label="Mettre en pause ou reprendre le minuteur">
                            <i id="timerPlayPauseIcon" class="fas fa-play" aria-hidden="true"></i>
                            <span id="timerPlayPauseText">Démarrer</span>
                        </button>
                        <button id="resetWorkoutTimerBtn" class="btn btn-danger" aria-label="Réinitialiser le minuteur">
                            <i class="fas fa-redo" aria-hidden="true"></i>
                            <span>Réinitialiser</span>
                        </button>
                    </div>
                </div>
            </section>
    
            <section class="controls session-notes-section" id="sessionNotesSection" aria-labelledby="sessionNotesTitle">
                <h2 id="sessionNotesTitle" class="sr-only">Notes de séance</h2>
                <label for="sessionNotes"><strong>Notes de séance:</strong></label>
                <textarea id="sessionNotes" placeholder="Ajouter des notes sur la séance..." aria-label="Notes de séance"></textarea>
            </section>
            
            <div class="action-buttons-group">
                <section class="action-buttons" aria-labelledby="actionButtonsTitle">
                    <h2 id="actionButtonsTitle" class="sr-only">Actions principales</h2>
                    <button class="btn btn-success" id="finishSessionBtn" aria-label="Terminer et Sauvegarder la séance">Terminer & sauvegarder</button>
                    <button class="btn btn-primary" id="viewHistoryBtn" aria-label="Voir l'historique">Historique</button>
                    <button class="btn btn-primary" id="plateCalculatorBtn" aria-label="Ouvrir les calculateurs">Calculateurs</button>
                </section>
        
                <section class="action-buttons" style="margin-top: var(--spacing-md);" aria-labelledby="dataManagementTitle">
                    <h2 id="dataManagementTitle" class="sr-only">Gestion des données</h2>
                    <button class="btn btn-info" id="exportBtn" aria-label="Exporter les données">Exporter</button>
                    <button class="btn btn-info" id="importBtn" aria-label="Importer les données">Importer</button>
                </section>
            </div>

            <input type="file" id="importFile" class="hidden" accept=".json,.csv" aria-label="Fichier d'importation">
        </main> 
    </div>
    
    <div id="notification-container" aria-live="polite" aria-atomic="true"></div>
    
    <div id="pwaInstallPrompt" class="hidden" role="dialog" aria-modal="true" aria-labelledby="pwaInstallTitle">
        <span id="pwaInstallTitle" style="font-weight: 600;">Ajoutez Lyftiv à votre écran d'accueil !</span>
        <button id="installPwaBtn" aria-label="Installer l'application">Installer</button>
        <button id="closePwaPrompt" class="close-btn" aria-label="Fermer le message d'installation">&times;</button>
    </div>

    <div id="historyModal" class="modal-overlay hidden" role="dialog" aria-modal="true" aria-labelledby="historyModalTitle">
      <div class="modal-content">
          <button id="closeHistoryModal" class="modal-close-btn" aria-label="Fermer le modal historique">&times;</button>
          <h2 id="historyModalTitle" class="modal-title">Historique des séances</h2>
          <div id="historyList" aria-live="polite"></div>
      </div>
    </div>

    <div id="newSessionModal" class="modal-overlay hidden" role="dialog" aria-modal="true" aria-labelledby="newSessionModalTitle">
        <div class="modal-content">
            <button id="closeNewSessionModal" class="modal-close-btn" aria-label="Fermer le modal de nouvelle séance">&times;</button>
            <h2 id="newSessionModalTitle" class="modal-title">Créer une nouvelle séance</h2>
            <div class="input-group-modal">
                <input type="text" id="newSessionNameInput" placeholder="Nom de la nouvelle séance" aria-label="Nom de la nouvelle séance">
                <div id="newSessionNameError" class="error-message"></div>
            </div>
            <div style="display: flex; justify-content: center; gap: var(--spacing-md); margin-top: var(--spacing-lg);">
                <button class="btn btn-outline" id="cancelNewSessionBtn"> Annuler</button>
                <button class="btn btn-success" id="createNewSessionBtn"> Créer</button>
            </div>
        </div>
    </div>

    <div id="loadOptionsModal" class="modal-overlay hidden" role="dialog" aria-modal="true" aria-labelledby="loadOptionsModalTitle">
      <div class="modal-content">
          <button id="closeLoadOptionsModal" class="modal-close-btn" aria-label="Fermer le modal d'options de chargement">&times;</button>
          <h2 id="loadOptionsModalTitle" class="modal-title">Options de chargement</h2>
          <p>Comment utiliser la séance "<strong id="loadSessionName"></strong>" ?</p>
          <div style="display: flex; justify-content: center; gap: var(--spacing-md); margin-top: var(--spacing-lg);">
              <button class="btn btn-primary" id="openNewSessionBtn">Ouvrir (remplace la séance actuelle)</button>
              <button class="btn btn-secondary" id="appendToCurrentSessionBtn">Ajouter à la séance actuelle</button>
          </div>
      </div>
    </div>

    <div id="plateCalculatorModal" class="modal-overlay hidden" role="dialog" aria-modal="true" aria-labelledby="plateCalcModalTitle">
        <div class="modal-content">
            <button id="closePlateCalculatorModal" class="modal-close-btn" aria-label="Fermer le modal du calculateur">&times;</button>
            <div class="modal-tabs" role="tablist">
                <button class="modal-tab-btn active" id="goalCalcTab" aria-controls="goalCalcContent" role="tab" aria-selected="true">Objectifs d'entraînement</button>
                <button class="modal-tab-btn" id="plateCalcTab" aria-controls="plateCalcContent" role="tab" aria-selected="false">Calculateur de plaques</button>
            </div>
            
            <div id="plateCalcContent" class="modal-tab-content hidden" role="tabpanel" aria-labelledby="plateCalcTab">
                <h2 id="plateCalcModalTitle" class="modal-title">Calculateur de plaques</h2>
                <div class="controls">
                    <div class="input-group-modal">
                        <input type="text" inputmode="decimal" id="targetWeightInput" placeholder="Poids cible (kg)" aria-label="Poids cible">
                        <div id="targetWeightError" class="error-message"></div>
                    </div>
                    <div class="input-group-modal">
                        <input type="text" inputmode="decimal" id="barbellWeightInput" placeholder="Poids barre (kg)" aria-label="Poids de la barre">
                        <div id="barbellWeightError" class="error-message"></div>
                    </div>
                </div>
                <div id="platesResult" style="text-align: left; margin-top: var(--spacing-lg);"></div>
            </div>

            <div id="goalCalcContent" class="modal-tab-content" role="tabpanel" aria-labelledby="goalCalcTab">
                <h2 class="modal-title">Objectifs d'entraînement</h2>
                <div class="controls">
                    <div style="display: flex; justify-content: center; gap: var(--spacing-md); margin-bottom: var(--spacing-md);">
                        <label>
                            <input type="radio" name="oneRmInputMode" value="manual" checked> Saisie Manuelle
                        </label>
                        <label>
                            <input type="radio" name="oneRmInputMode" value="select"> Sélection d'Exercice
                        </label>
                    </div>

                    <div id="oneRmManualInput" class="input-group-modal">
                        <input type="text" inputmode="decimal" id="oneRmInput" placeholder="Votre 1RM (kg)" aria-label="Votre 1RM">
                        <div id="oneRmError" class="error-message"></div>
                    </div>

                    <div id="oneRmSelectInput" class="input-group-modal hidden">
                        <select id="oneRmExerciseSelect" aria-label="Sélectionner un exercice pour le 1RM">
                            <option value="">-- Sélectionner un exercice --</option>
                        </select>
                    </div>
                </div>
                <div id="goalResultsContainer"></div>
            </div>
        </div>
    </div>
    
    <div id="quickEditModal" class="modal-overlay hidden" role="dialog" aria-modal="true" aria-labelledby="quickEditModalTitle">
      <div class="modal-content">
          <button id="closeQuickEditModal" class="modal-close-btn" aria-label="Fermer le modal d'édition rapide">&times;</button>
          <h2 id="quickEditModalTitle" class="modal-title">Édition rapide</h2>
          <p>Appliquer à toutes les séries de : <strong id="quickEditExerciseName"></strong></p>
          <div class="controls">
              <div class="input-group-modal">
                  <input type="text" inputmode="decimal" id="quickEditWeight" placeholder="Poids (kg)" aria-label="Poids pour édition rapide">
                  <div id="quickEditWeightError" class="error-message"></div>
              </div>
              <div class="input-group-modal">
                  <input type="text" inputmode="decimal" id="quickEditReps" placeholder="Reps" aria-label="Répétitions pour édition rapide">
                  <div id="quickEditRepsError" class="error-message"></div>
              </div>
          </div>
          <button class="btn btn-success" id="applyQuickEditBtn" style="width: 100%; margin-top: var(--spacing-md);"> Appliquer</button>
      </div>
    </div>

    <nav class="bottom-navigation" aria-label="Navigation principale">
        <button class="btn btn-primary" id="bottomAddExerciseBtn" aria-label="Ajouter un exercice">
            <i class="fas fa-plus-circle"></i>
            <span>Exercice</span>
        </button>
        <button class="btn btn-primary" id="bottomNotesBtn" aria-label="Notes de séance">
            <i class="fas fa-clipboard"></i>
            <span>Notes</span>
        </button>
        <button class="btn btn-primary" id="bottomViewHistoryBtn" aria-label="Historique">
            <i class="fas fa-history"></i>
            <span>Historique</span>
        </button>
        <button class="btn btn-primary" id="bottomPlateCalculatorBtn" aria-label="Calculateurs">
            <i class="fas fa-calculator"></i>
            <span>Calculs</span>
        </button>
        <button class="btn btn-primary" id="bottomScrollBtn" aria-label="Faire défiler la page">
            <i class="fas fa-arrows-alt-v"></i>
            <span>Défiler</span>
        </button>
    </nav>
</body>
</html>
